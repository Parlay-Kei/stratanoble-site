(()=>{var e={};e.id=65,e.ids=[65],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},56891:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>v,routeModule:()=>p,serverHooks:()=>m,workAsyncStorage:()=>c,workUnitAsyncStorage:()=>d});var n={};r.r(n),r.d(n,{GET:()=>l});var s=r(96559),a=r(48088),i=r(37719),o=r(32190);let u=process.env.CALENDLY_TOKEN;async function l(e){try{if(!u)return o.NextResponse.json({error:"Calendly configuration missing"},{status:500});let{searchParams:t}=new URL(e.url),r=t.get("event_type_url")||"https://calendly.com/stratanoble/side-hustle",n=function(e){try{let t=new URL(e).pathname.split("/"),r=t.findIndex(e=>"event_types"===e);if(-1!==r&&t[r+1])return t[r+1];return null}catch{return null}}(r);if(!n)return o.NextResponse.json({error:"Invalid Calendly event type URL"},{status:400});let s=await fetch(`https://api.calendly.com/scheduled_events?event_type=${r}&status=active&min_start_time=${new Date().toISOString()}`,{headers:{Authorization:`Bearer ${u}`,"Content-Type":"application/json"}});if(!s.ok)return o.NextResponse.json({error:"Failed to fetch events from Calendly"},{status:s.status});let a=((await s.json()).collection||[]).filter(e=>new Date(e.start_time)>new Date).map(e=>({uri:e.uri,name:e.name,start_time:e.start_time,end_time:e.end_time,location:e.location,invitees_counter:e.invitees_counter,available_spots:e.invitees_counter.limit-e.invitees_counter.active})).sort((e,t)=>new Date(e.start_time).getTime()-new Date(t.start_time).getTime());return o.NextResponse.json({success:!0,events:a,total:a.length,event_type_slug:n})}catch{return o.NextResponse.json({error:"Failed to fetch upcoming events"},{status:500})}}let p=new s.AppRouteRouteModule({definition:{kind:a.RouteKind.APP_ROUTE,page:"/api/calendly/upcoming/route",pathname:"/api/calendly/upcoming",filename:"route",bundlePath:"app/api/calendly/upcoming/route"},resolvedPagePath:"C:\\dev\\strata-noble\\src\\app\\api\\calendly\\upcoming\\route.ts",nextConfigOutput:"standalone",userland:n}),{workAsyncStorage:c,workUnitAsyncStorage:d,serverHooks:m}=p;function v(){return(0,i.patchFetch)({workAsyncStorage:c,workUnitAsyncStorage:d})}},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},78335:()=>{},96487:()=>{}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[447,580],()=>r(56891));module.exports=n})();