(()=>{var e={};e.id=225,e.ids=[225],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11997:e=>{"use strict";e.exports=require("punycode")},27910:e=>{"use strict";e.exports=require("stream")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},34631:e=>{"use strict";e.exports=require("tls")},39727:()=>{},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},47990:()=>{},53880:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>q,routeModule:()=>w,serverHooks:()=>v,workAsyncStorage:()=>f,workUnitAsyncStorage:()=>h});var s={};r.r(s),r.d(s,{POST:()=>x});var i=r(96559),a=r(48088),o=r(37719),n=r(32190),u=r(66437);let p=process.env.SUPABASE_URL,l=process.env.SUPABASE_SERVICE_ROLE,c=process.env.MAILCHIMP_API_KEY,d=process.env.MAILCHIMP_AUDIENCE_ID,m=p&&l?(0,u.UU)(p,l):null;async function x(e){try{let{fullName:t,email:r,source:s="web"}=await e.json();if(!t?.trim()||!r?.trim())return n.NextResponse.json({error:"Full name and email are required"},{status:400});if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r))return n.NextResponse.json({error:"Invalid email format"},{status:400});if(!m)return n.NextResponse.json({error:"Database configuration missing"},{status:500});let{data:i}=await m.from("workshop_waitlist").select("id").eq("email",r.toLowerCase()).single();if(i)return n.NextResponse.json({error:"You are already on the waitlist!"},{status:409});let{data:a,error:o}=await m.from("workshop_waitlist").insert([{full_name:t.trim(),email:r.toLowerCase().trim(),source:s}]).select().single();if(o)return n.NextResponse.json({error:"Failed to add to waitlist"},{status:500});if(c&&d)try{(await fetch(`https://us1.api.mailchimp.com/3.0/lists/${d}/members`,{method:"POST",headers:{Authorization:`Bearer ${c}`,"Content-Type":"application/json"},body:JSON.stringify({email_address:r.toLowerCase().trim(),status:"subscribed",merge_fields:{FNAME:t.split(" ")[0],LNAME:t.split(" ").slice(1).join(" ")||""},tags:["workshop-waitlist","side-hustle"]})})).ok}catch{}return n.NextResponse.json({success:!0,message:"Successfully added to waitlist",data:{id:a.id,email:a.email,fullName:a.full_name}})}catch{return n.NextResponse.json({error:"Internal server error"},{status:500})}}let w=new i.AppRouteRouteModule({definition:{kind:a.RouteKind.APP_ROUTE,page:"/api/waitlist/route",pathname:"/api/waitlist",filename:"route",bundlePath:"app/api/waitlist/route"},resolvedPagePath:"C:\\dev\\strata-noble\\src\\app\\api\\waitlist\\route.ts",nextConfigOutput:"standalone",userland:s}),{workAsyncStorage:f,workUnitAsyncStorage:h,serverHooks:v}=w;function q(){return(0,o.patchFetch)({workAsyncStorage:f,workUnitAsyncStorage:h})}},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},74075:e=>{"use strict";e.exports=require("zlib")},78335:()=>{},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},91645:e=>{"use strict";e.exports=require("net")},94735:e=>{"use strict";e.exports=require("events")},96487:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[447,580,437],()=>r(53880));module.exports=s})();